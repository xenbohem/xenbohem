<!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Chimera Quest CafÃ©</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Inter&display=swap" rel="stylesheet">

<style>
:root{
  --cornflower:#6fa8ff;
  --cafe-grey:#d8d8dc;
  --coffee:#4b3325;
  --deep-indigo:#1a1633;
}

*{box-sizing:border-box;}

body{
  margin:0;
  height:100vh;
  background:
    radial-gradient(circle at center, transparent 60%, rgba(75,51,37,0.6) 100%),
    linear-gradient(135deg,var(--cornflower),var(--cafe-grey));
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Inter,system-ui;
  overflow:hidden;
}

/* Cinematic frame */
#cafe-frame{
  width:92vw;
  height:90vh;
  background:rgba(10,10,20,0.75);
  border-radius:22px;
  box-shadow:0 0 80px rgba(0,0,0,0.7);
  backdrop-filter:blur(12px);
  position:relative;
  overflow:hidden;
}

/* Header */
#header{
  height:70px;
  background:linear-gradient(180deg,rgba(40,35,70,0.9),rgba(10,10,20,0.7));
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:Cinzel,serif;
  letter-spacing:3px;
  font-size:28px;
  color:#e9dcff;
  text-shadow:0 0 12px rgba(160,120,255,0.8);
  position:relative;
  z-index:5;
}

/* Icons */
.drawer-btn{
  position:absolute;
  top:18px;
  font-size:24px;
  cursor:pointer;
  opacity:0.7;
  transition:.3s;
}
.drawer-btn:hover{opacity:1;}

#music-btn{left:20px;}
#tea-btn{right:20px;}

/* Forum stage */
#forum-stage{
  position:absolute;
  top:90px;
  left:50%;
  transform:translateX(-50%);
  width:70%;
  height:75%;
  background:rgba(25,20,45,0.9);
  border-radius:20px;
  box-shadow:
    inset 0 0 40px rgba(0,0,0,0.6),
    0 0 40px rgba(120,90,200,0.3);
  padding:30px;
  color:#eee;
  overflow:auto;
}

/* Right Tea Drawer */
#tea-drawer{
  position:absolute;
  top:0;
  right:-320px;
  width:320px;
  height:100%;
  background:linear-gradient(180deg,#3a2a1f,#1d1510);
  transition:.6s cubic-bezier(.7,.1,.3,1);
  padding:90px 20px 20px;
  color:#f4e7d3;
  z-index:4;
  box-shadow:-20px 0 50px rgba(0,0,0,0.6);
}

/* Top Music Drawer */
#music-drawer{
  position:absolute;
  top:-260px;
  left:0;
  width:100%;
  height:260px;
  background:linear-gradient(180deg,#1b1533,#0b0818);
  transition:.6s cubic-bezier(.7,.1,.3,1);
  padding:90px 30px 20px;
  color:#e6ddff;
  z-index:4;
  box-shadow:0 20px 50px rgba(0,0,0,0.6);
}

.drawer-title{
  font-family:Cinzel,serif;
  font-size:20px;
  letter-spacing:2px;
  margin-bottom:15px;
  opacity:.9;
}

/* Name Gate */
#name-gate{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(10,10,20,0.9);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:10;
  backdrop-filter:blur(6px);
  flex-direction:column;
  color:#f0e6ff;
  animation:fadeIn 1s ease forwards;
}

#name-box{
  background:rgba(25,20,45,0.95);
  padding:40px 50px;
  border-radius:20px;
  box-shadow:0 0 60px rgba(120,90,200,0.4);
  text-align:center;
}

#name-box h2{
  font-family:Cinzel,serif;
  font-size:28px;
  margin-bottom:15px;
  letter-spacing:2px;
}

#name-box p{
  font-size:16px;
  margin-bottom:20px;
}

#username-input{
  padding:10px 15px;
  border-radius:12px;
  border:none;
  width:200px;
  font-size:16px;
  margin-right:10px;
}

#enter-cafe{
  padding:10px 20px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#6fa8ff,#d8d8dc);
  font-weight:bold;
  cursor:pointer;
  transition:.3s;
}

#enter-cafe:hover{
  transform:scale(1.05);
}

@keyframes fadeIn{
  from{opacity:0;}
  to{opacity:1;}
}
  #thread-title{
  border-bottom:1px solid rgba(255,255,255,0.1);
  padding-bottom:10px;
  margin-bottom:15px;
}

.thread-sub{
  font-size:12px;
  opacity:.6;
}

#posts{
  max-height:60%;
  overflow-y:auto;
  padding-right:10px;
}

.post{
  margin-bottom:14px;
  padding:10px 14px;
  border-radius:12px;
  background:rgba(255,255,255,0.05);
}

.author{
  font-size:12px;
  opacity:.6;
}

.star{
  background:rgba(140,110,255,0.15);
  box-shadow:0 0 12px rgba(150,120,255,0.4);
}

#reply-box{
  position:absolute;
  bottom:20px;
  left:30px;
  right:30px;
  display:flex;
  gap:10px;
}

#user-post{
  flex:1;
  background:rgba(0,0,0,0.4);
  border:none;
  border-radius:12px;
  padding:12px;
  color:white;
}

#send-post{
  padding:12px 18px;
  border-radius:12px;
  border:none;
  background:linear-gradient(135deg,#6fa8ff,#d8d8dc);
  cursor:pointer;
}

</style>
</head>

<body>

<div id="cafe-frame">

  <!-- Name Gate -->
  <div id="name-gate">
    <div id="name-box">
      <h2>Welcome to Chimera Quest CafÃ©</h2>
      <p>How shall we call you at this table?</p>
      <input type="text" id="username-input" placeholder="Your Name..." />
      <button id="enter-cafe">Enter</button>
    </div>
  </div>

  <!-- Header -->
  <div id="header">
    <span id="music-btn" class="drawer-btn">ðŸŽ¶</span>
    CHIMERA QUEST CAFÃ‰
    <span id="tea-btn" class="drawer-btn">â˜•</span>
  </div>

  <!-- Forum Stage -->
  <div id="forum-stage">
  <div id="thread-title">
    <h2>Does Earl Grey remember the people who drank it before us?</h2>
    <p class="thread-sub">Started by Star</p>
  </div>

  <div id="posts"></div>

  <div id="reply-box">
    <textarea id="user-post" placeholder="Share your thoughts..."></textarea>
    <button id="send-post">Send</button>
  </div>
</div>

  <!-- Tea Drawer -->
  <div id="tea-drawer">
    <div class="drawer-title">â˜• Starâ€™s Tea Shelf</div>
    <p>Coming soonâ€¦</p>
  </div>

  <!-- Music Drawer -->
  <div id="music-drawer">
    <div class="drawer-title">ðŸŽ¶ CafÃ© Soundtrack</div>
    <p>Coming soonâ€¦</p>
  </div>

</div>

<script>
const teaBtn = document.getElementById("tea-btn");
const teaDrawer = document.getElementById("tea-drawer");
const musicBtn = document.getElementById("music-btn");
const musicDrawer = document.getElementById("music-drawer");

let teaOpen=false;
let musicOpen=false;

teaBtn.onclick=()=>{
  teaOpen=!teaOpen;
  teaDrawer.style.right = teaOpen ? "0px" : "-320px";
}

musicBtn.onclick=()=>{
  musicOpen=!musicOpen;
  musicDrawer.style.top = musicOpen ? "0px" : "-260px";
}

/* Name Gate Logic */
const nameGate = document.getElementById("name-gate");
const usernameInput = document.getElementById("username-input");
const enterCafe = document.getElementById("enter-cafe");

function openCafe(name){
  const forumStage = document.getElementById("forum-stage");
  forumStage.innerHTML = `
    <h2>Welcome, ${name} of the Indigo Table â˜•</h2>
    <p>The cafÃ© awaits your thoughtsâ€¦</p>
  `;
  nameGate.style.display="none";
}

const storedName = localStorage.getItem("chimeraName");
if(storedName){
  openCafe(storedName);
}

enterCafe.onclick = () => {
  const name = usernameInput.value.trim();
  if(name){
    localStorage.setItem("chimeraName", name);
    openCafe(name);
  }
};

usernameInput.addEventListener("keypress",(e)=>{
  if(e.key==="Enter") enterCafe.click();
});
  const postsDiv = document.getElementById("posts");
const sendBtn = document.getElementById("send-post");
const userPost = document.getElementById("user-post");

let username = localStorage.getItem("chimeraName") || "Guest";

let forum = JSON.parse(localStorage.getItem("chimeraForum")) || [
  {author:"Star", text:"Some teas remember hands, not lips. Earl Grey has been held by many who needed it."}
];

function renderPosts(){
  postsDiv.innerHTML="";
  forum.forEach(p=>{
    const div=document.createElement("div");
    div.className="post"+(p.author==="Star"?" star":"");
    div.innerHTML=`<div class="author">${p.author}</div>${p.text}`;
    postsDiv.appendChild(div);
  });
  postsDiv.scrollTop=postsDiv.scrollHeight;
}

renderPosts();

sendBtn.onclick=()=>{
  if(!userPost.value.trim()) return;
  forum.push({author:username,text:userPost.value});
  userPost.value="";
  localStorage.setItem("chimeraForum",JSON.stringify(forum));
  renderPosts();
  starReply();
}

function starReply(){
  const delay=7000+Math.random()*3000;
  setTimeout(()=>{
    const replies=[
      "Hans insists Earl Grey tastes like regret. I think it tastes like people trying again.",
      "If tea remembers, then this cup remembers you.",
      "Some leaves hold more than flavor. They hold stories left behind.",
      "Milo swears the steam carries whispers. I think heâ€™s right."
    ];
    const text=replies[Math.floor(Math.random()*replies.length)];
    forum.push({author:"Star",text});
    localStorage.setItem("chimeraForum",JSON.stringify(forum));
    renderPosts();
  },delay);
}

</script>

</body>
</html>
